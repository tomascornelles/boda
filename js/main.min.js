function initMap(){var a=[{stylers:[{hue:"#F39C12"},{saturation:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:100}]}],b=new google.maps.StyledMapType(a,{name:"Styled Map"}),c={zoom:16,center:{lat:41.3890643,lng:2.167363},scrollwheel:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]},disableDefaultUI:!0},d=new google.maps.Map(document.getElementById("map"),c);d.mapTypes.set("map_style",b),d.setMapTypeId("map_style");var e={title:"Hotel Avenida Palace",coords:new google.maps.LatLng(41.3890643,2.167363),description:'<h4>Hotel Avenida Palace</h4><p><strong>Direcci\xf3n:</strong><br>Gran Via de Les Corts Catalanes, 605, 08007 Barcelona</p><p><strong>Horario: </strong><br>Fotos: 19:00h<br>Ceremonia: 19:30h<br>Recepci\xf3n: 21:00h</p><p><a href="https://www.google.es/maps/dir//Hotel+Avenida+Palace,+Gran+Via+de+Les+Corts+Catalanes,+605,+08007+Barcelona/@41.3890643,2.1651743,17z/data=!4m13!1m4!3m3!1s0x12a4a2f257ed123f:0xd0526acc9f673041!2sHotel+Avenida+Palace!3b1!4m7!1m0!1m5!1m1!1s0x12a4a2f257ed123f:0xd0526acc9f673041!2m2!1d2.167363!2d41.3890643" target="_blank" class="button u-full-width">\xbfComo llegar?</a></p>',icono:"img/palace64.png"},f=new google.maps.InfoWindow({content:e.description}),g=new google.maps.Marker({position:e.coords,map:d,title:e.title,icon:e.icono});g.addListener("click",function(){f.open(d,g)})}function InvitadoCargar(a,b){var c;a.admin?(c={admin:!0},localStorage.setItem("datos",JSON.stringify(c)),page("/admin")):(c={id:b,pass:a.pass,nombre:a.nombre,email:a.email,adultos:a.adultos,ninos:a.ninos,comida:a.comida,mensaje:a.mensaje,confirmar:a.confirmar,canciones:a.canciones,chara:a.chara},localStorage.setItem("datos",JSON.stringify(c)),page("/invitado"))}function InvitadoMostrar(){var a=JSON.parse(localStorage.datos);$(".Invitado-nombre").text(a.nombre),void 0!==a.confirmar?($(".Invitado-noConfirma").hide(),$(".Invitado-confirmado").show(),void 0!==a.mensaje?$('.button[data-destino=".Invitado-contenido-mensaje"]').hide():$('.button[data-destino=".Invitado-contenido-mensaje"]').closest(".six").removeClass("six").addClass("twelve"),$(".Invitado--cargando").hide(),$(".Invitado-contenido").fadeIn(),$(".Invitado").fadeIn(1e3)):($(".Invitado--cargando").hide(),$(".Invitado-contenido").fadeIn(),$(".Invitado").fadeIn(1e3))}function InvitadoGuardar(a){var b=JSON.parse(localStorage.datos),c=a.attr("data-parametro"),d="";$(".checked[data-parametro="+c+"]").each(function(){d&&(d+=", "),d+=$(this).text()}),b[c]=d,localStorage.setItem("datos",JSON.stringify(b)),new Firebase("https://boda201610.firebaseio.com/").child(b.id).set(b)}function InvitadoMensaje(){var a=JSON.parse(localStorage.datos);a.mensaje=$(".Invitado-mensaje-texto").val(),localStorage.setItem("datos",JSON.stringify(a)),new Firebase("https://boda201610.firebaseio.com/").child(a.id).set(a)}function InvitadoConfirmar(){var a=JSON.parse(localStorage.datos);a.confirmar="Confirmado",localStorage.setItem("datos",JSON.stringify(a)),new Firebase("https://boda201610.firebaseio.com/").child(a.id).set(a)}function Login(a){var b=a.params.pass;$(".Login-form").on("submit",function(a){a.preventDefault(),page("/invitado/"+$(".Login-llave").val())}),b?"error"===b?(PaginaLogin(),$(".Login-noPass").fadeIn(500)):(b=parseInt(b),localStorage.removeItem("datos"),new Firebase("https://boda201610.firebaseio.com/").orderByChild("pass").equalTo(b).once("value",function(a){if(a.val()){var b=a.val();for(var c in b){var d=b[c];InvitadoCargar(d,c)}}else page("/invitado/error")})):localStorage.datos?PaginaInvitado():PaginaLogin()}function Logout(){localStorage.removeItem("datos"),$(".checked").removeClass("checked"),page("/home")}function LoginCervero(a){localStorage.datos||(window.location.href="./");var b=JSON.parse(localStorage.datos);"admin"!==a||b.admin||(window.location.href="./")}function MusicaPlaylist(){var a=JSON.parse(localStorage.datos);if(a.canciones){$(".Musica-mis-resultados").empty();for(var b=a.canciones.split(", "),c=0;c<b.length;c++){var d="https://api.spotify.com/v1/tracks/"+b[c];$.get(d,function(a){var b='<div class="Musica-resultado u-cf"><a data-cancion="'+a.id+'" class="Musica-resultado-remove"></a><div class="Musica-resultado-imagen"><img src="'+a.album.images[0].url+'" alt=""></div><h4 class="Musica-resultado-nombre">'+a.name+'</h4><div class="Musica-resultado-artista">'+a.artists[0].name+'</div><div class="Musica-resultado-album">'+a.album.name+"</div></div>";$(".Musica-mis-resultados").append(b),$(".Musica-resultado-add").on("click",MusicaGuardar),$(".Musica-resultado-remove").on("click",MusicaBorrar)})}}else $(".Musica-mis-resultados").html("<h3>\xbfNos ayudas con la m\xfasica de la fiesta?</h3><p>\xa1Sugierenos las canciones que m\xe1s te gusten!</p>");$(".Musica").fadeIn(1e3)}function MusicaBuscar(){var a="https://api.spotify.com/v1/search?query="+$(this).val()+"&offset=0&limit=20&type=track";$.get(a,function(a){$(".Musica-resultados").empty();for(var b=0;b<a.tracks.items.length;b++){var c=a.tracks.items[b],d=JSON.parse(localStorage.datos),e="Musica-resultado-add";d.canciones&&-1!==d.canciones.indexOf(c.id)&&(e="Musica-resultado-remove");var f='<div class="Musica-resultado u-cf"><a data-cancion="'+c.id+'" class="'+e+'"></a><div class="Musica-resultado-imagen"><img src="'+c.album.images[0].url+'" alt=""></div><h4 class="Musica-resultado-nombre">'+c.name+'</h4><div class="Musica-resultado-artista">'+c.artists[0].name+'</div><div class="Musica-resultado-album">'+c.album.name+"</div></div>";$(".Musica-resultados").append(f)}$(".Musica-resultado-add").on("click",MusicaGuardar),$(".Musica-resultado-remove").on("click",MusicaBorrar)})}function MusicaGuardar(){var a=JSON.parse(localStorage.datos),b="canciones",c=$(this).attr("data-cancion");$(this).addClass("Musica-resultado-remove").removeClass("Musica-resultado-add"),a[b]?a[b]+=", "+c:a[b]=c,$(".Musica-volver").slideDown(),localStorage.setItem("datos",JSON.stringify(a)),new Firebase("https://boda201610.firebaseio.com/").child(a.id).set(a),$(".Musica-resultado-remove").on("click",MusicaBorrar)}function MusicaBorrar(){var a=JSON.parse(localStorage.datos),b="canciones",c=$(this).attr("data-cancion");$(this).addClass("Musica-resultado-add").removeClass("Musica-resultado-remove");var d=a.canciones.split(", ");a[b]="";for(var e=0;e<d.length;e++)a[b]&&d[e]!==c?a[b]+=", "+d[e]:d[e]!==c&&(a[b]=d[e]);localStorage.setItem("datos",JSON.stringify(a)),new Firebase("https://boda201610.firebaseio.com/").child(a.id).set(a),$(".Musica-resultado-add").on("click",MusicaGuardar)}function AdminListar(a){a.params.consulta;new Firebase("https://boda201610.firebaseio.com/").orderByChild("confirmar").equalTo("Confirmado").once("value",function(a){if(a.val()){var b=a.val();for(var c in b){var d=b[c];AdminMostrarInvitado(d)}}else $(".Admin .mensajes").append("No hay resultados")}),$(".Admin").fadeIn(1e3)}function AdminMostrar(a){}function AdminMostrarInvitado(a){var b="";a.adultos&&(b+=a.adultos+" Adultos"),a.adultos&&a.ninos&&(b+=" y "),a.ninos&&(b+=a.ninos+" Ni\xf1os"),$(".Admin-listado").append("<li><strong>"+a.nombre+": </strong>"+b+"</li>")}function CharaMaker(){var a=["#efbe92","#402420","#000000","#c22b2a","#004584","#402420"],b={svg_body:a[0],svg_hair:a[1],svg_beard:"transparent",svg_mustache:"transparent",svg_eyes:a[2],svg_shirt:a[3],svg_pants:a[4],svg_shoes:a[5],svg_shirt_chaleco:"transparent",svg_shirt_tirantes:"transparent",svg_shirt_rayas:"transparent",svg_shirt_flash:"transparent",hairType:"corto",pantType:"largo"};if(localStorage.datos){var c=JSON.parse(localStorage.datos);c.chara?b=c.chara:c.chara=b}$(".svg_body").css({fill:b.svg_body}),$(".svg_hair").css({fill:b.svg_hair}).hide(),"corto"===b.hairType?$(".svg_hair_corto").show():$(".svg_hair_largo").show(),$(".svg_beard").css({fill:b.svg_beard}),$(".svg_mustache").css({fill:b.svg_mustache}),$(".svg_eyes").css({fill:b.svg_eyes}),$(".svg_shirt").css({fill:b.svg_shirt}).hide(),$(".svg_shirt_corto").show(),$(".svg_shirt_chaleco").css({fill:b.svg_shirt_chaleco}),$(".svg_shirt_tirantes").css({fill:b.svg_shirt_tirantes}),$(".svg_shirt_rayas").css({fill:b.svg_shirt_rayas}),$(".svg_shirt_flash").css({fill:b.svg_shirt_flash}),$(".svg_pants").css({fill:b.svg_pants}).hide(),"falda"===b.pantType?$(".svg_pants_falda").show():"corto"===b.pantType?$(".svg_pants_corto").show():$(".svg_pants_largo").show(),$(".svg_shoes").css({fill:b.svg_shoes});var d=[];d[".svg_hair"]="corto",d[".svg_pants"]="largo",$(".elije-color").on("click",function(){var a=$(this).attr("data-parte");if(CharaColores(a,b),$(".Chara-opciones .opciones").empty(),$(this).attr("data-tipos")){for(var c=$(this).attr("data-tipos"),d=c.split(" "),e=0;e<d.length;e++)$(".Chara .opciones").append('<a data-tipo="'+d[e]+'" class="button opcion">'+d[e]+"</a> ");$(".opcion").on("click",function(){"svg_hair"===a?b.hairType=$(this).attr("data-tipo"):b.pantType=$(this).attr("data-tipo"),"falda"===$(this).attr("data-tipo")&&$('.elije-color[data-parte="svg_pants"]').text("Falda"),("corto"===$(this).attr("data-tipo")||"largo"===$(this).attr("data-tipo"))&&$('.elije-color[data-parte="svg_pants"]').text("Pantal\xf3n"),$("."+a).hide();var c="."+a+"_"+$(this).attr("data-tipo");$(c).show(),"falda"===b.pantType&&"largo"===b.hairType?($(".Chara .svg_base, .Chara .svg_sombra").css({fill:"transparent",stroke:"transparent"}),$(".Chara .svg_base.svg_base_pelo_falda").css({fill:"#000",stroke:"#000"}),$(".Chara .svg_sombra.svg_base_pelo_falda").css({fill:"rgba(0,0,0,.5)"})):"falda"===b.pantType&&"largo"!==b.hairType?($(".Chara .svg_base, .Chara .svg_sombra").css({fill:"transparent",stroke:"transparent"}),$(".Chara .svg_base.svg_base_falda").css({fill:"#000",stroke:"#000"}),$(".Chara .svg_sombra.svg_base_falda").css({fill:"rgba(0,0,0,.5)"})):"falda"!==b.pantType&&"largo"===b.hairType?($(".Chara .svg_base, .Chara .svg_sombra").css({fill:"transparent",stroke:"transparent"}),$(".Chara .svg_base.svg_base_pelo").css({fill:"#000",stroke:"#000"}),$(".Chara .svg_sombra.svg_base_pelo").css({fill:"rgba(0,0,0,.5)"})):($(".Chara .svg_base, .Chara .svg_sombra").css({fill:"transparent",stroke:"transparent"}),$(".Chara .svg_base.svg_base_hombre").css({fill:"#000",stroke:"#000"}),$(".Chara .svg_sombra.svg_base_hombre").css({fill:"rgba(0,0,0,.5)"}))})}$(".Chara .partes").hide(),$(".Chara-opciones").slideDown()})}function CharaColores(a,b){var c=["transparent","#efbe92","#edb69f","#c0642e","#8b391e","#402420","#000000","#ffffff","#ffefbd","#ffc500","#e45214","#c22b2a","#ff8ea4","#693d9f","#004584","#007ebe","#0f8a49","#5ccf97","#182c1d","#ca1146","#5a0b15","#67a9bf","#8e9397"];$(".Chara-opciones .colores").empty();for(var d=0;d<c.length;d++)"transparent"===c[d]?$(".Chara .colores").append('<a data-color="'+c[d]+'" style="background-color:'+c[d]+'" class="button color">Borrar</a> <br>'):$(".Chara .colores").append('<a data-color="'+c[d]+'" style="background-color:'+c[d]+'" class="button color"></a> '),d%6===0&&$(".Chara .colores").append("<br>");$(".Chara .colores").append('<br><a class="button color">Cerrar</a> <br>'),$(".color").on("click",function(){if($(this).attr("data-color")&&$("."+a).css({fill:$(this).attr("data-color")}),$(".Chara-opciones").hide(),$(".Chara .partes").fadeIn(),b[a]=$(this).attr("data-color"),localStorage.datos){var c=JSON.parse(localStorage.datos);c.chara=b,localStorage.setItem("datos",JSON.stringify(c)),new Firebase("https://boda201610.firebaseio.com/").child(c.id).set(c)}})}function toggleDestino(){$($(this).attr("data-destino")).siblings(".Page-section").slideUp(400),$($(this).attr("data-destino")).slideDown(400)}function toggleButton(){$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked").siblings(".button-radio").removeClass("checked"),InvitadoGuardar($(this))}function checkButton(){$(this).toggleClass("checked"),InvitadoGuardar($(this))}function PaginaLimpia(){$(".Page").hide(),$(".Page-section").hide(),$(".error").hide(),$(".Musica-resultados").empty(),$(".Musica-input").val(""),$(".Menu .u-desktop").css({display:""}),$(".Menu a").show(),localStorage.datos||$(".cervero").hide(),$(".Invitado--cargando").show(),$(".Invitado-contenido-botones").show()}function PaginaHome(){PaginaLimpia(),$(".Home").fadeIn(1e3)}function PaginaChara(){PaginaLimpia(),CharaMaker(),$(".Chara").fadeIn(1e3)}function PaginaMapa(){LoginCervero(),PaginaLimpia(),$(".Mapa").fadeIn(1e3),initMap()}function PaginaInvitado(){LoginCervero(),PaginaLimpia(),InvitadoMostrar()}function PaginaLogin(){PaginaLimpia(),$(".Login").fadeIn(1e3)}function PaginaMusica(){LoginCervero(),PaginaLimpia(),MusicaPlaylist()}function PaginaMusicaBuscar(){LoginCervero(),PaginaLimpia(),$(".Musica-Buscar").fadeIn(1e3)}function PaginaAdmin(){LoginCervero("admin"),PaginaLimpia(),$(".Admin").fadeIn(1e3)}function PaginaAdminListar(){LoginCervero("admin"),PaginaLimpia(),AdminListar(),$(".Admin").fadeIn(1e3)}function PaginaAdminMostrar(){LoginCervero("admin"),PaginaLimpia(),AdminMostrar(),$(".Admin").fadeIn(1e3)}function Pagina404(){PaginaLimpia(),$(".Error404").fadeIn(1e3)}$(function(){$(window).on("resize",function(){initMap(),$(".Menu .u-desktop").css({display:""})}),$(".Menu-toggle").on("click",function(){$(".Menu .u-desktop").slideToggle()}),$(".button-submit").on("click",toggleDestino),$(".button-radio").on("click",toggleButton),$(".button-check").on("click",checkButton),$(".Invitado-mensaje-enviar").on("click",InvitadoMensaje),$(".Invitado-confirmar-enviar").on("click",InvitadoConfirmar),$(".Musica-input").on("keyup",MusicaBuscar),page.base("/boda"),page("/",PaginaHome),page("/home",PaginaHome),page("/dibuja",PaginaChara),page("/informacion",PaginaMapa),page("/invitado",Login),page("/invitado/:pass",Login),page("/salir",Logout),page("/musica",PaginaMusica),page("/buscarmusica",PaginaMusicaBuscar),page("/admin",PaginaAdmin),page("/admin/listar/:consulta",AdminListar),page("/admin/mostrar/:consulta",AdminMostrar),page("/*",Pagina404),page({hashbang:!0})});